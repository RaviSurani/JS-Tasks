<!DOCTYPE html>
<html data-test-id="brave-new-tab-page" dir="ltr">

<head>
  <title>Todo Task</title>
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style>
    .center {
      margin: 10% 25%;
      border-style: double;
      padding: 1% 3%;
      align-items: center;
    }

    #maininput {
      width: 100%;
    }

    .button {
      width: 100%;
      padding: 0px !important;
    }

    table {
      padding: 0% 15%;
    }

    .table>:not(caption)>*>* {
      padding: 0px;
    }

    .itemName {
      width: 70%;
    }

    .editnput {
      padding: 0px !important;
    }

    h3 {
      text-align: center
    }

    .hide {
      display: none;
    }
  </style>

</head>

<body>
  <div id="root">
    <div class="center">
      <h3>Things To Do</h3>
      <input type="text" id="maininput" oninput="search()">
      <table id="itemtable" class="table"></table>
      <button id="addBtn" class="hide" onclick="addnew()">Add</button>
      <div>Total Records : <span id="totalSpan"></span>
        <button id="btnSort" onclick="sortList()">Sort</button>
      </div>
    </div>
  </div>
</body>
<script>
  let list = ['abc', 'def', '123'];
  (function () {
    setUl(list);
  })();
  function setUl(showList) {
    let html = '';
    showList.forEach(function (item, index) {
      html += `<tr>
        <td><input type="checkbox" class="editRecord" value="${item}"></td>
        <td class='hide' id=${'div' + index}>  <input type="text" id="item${index}" value='${item}' class='editnput'> <button onclick='update(${index})'>Edit</button></td>
        <td class='itemName' id='td${index}'>${item}</td>
        <td>
          <button class=" button" onclick='editItem(${index})'>Edit</button></td>
          <td><button class="button" onclick='removeItem(${index})'>Remove</button></td>
        
        </tr> `;
    });
    document.getElementById('itemtable').innerHTML = html;
    document.getElementById('totalSpan').innerText = list.length;
  }
  function editItem(id) {
    document.getElementById('td' + id).classList.toggle('hide')
    document.getElementById('div' + id).classList.toggle('hide')
  }
  function update(id) {
    list[id] = document.getElementById('item' + id).value;
    setUl(list);
  }
  function removeItem(id) {
    list.splice(id, 1);
    setUl(list);
  }
  function search() {
    let inputval = document.getElementById('maininput').value;
    let newList = [];
    list.forEach(function (item, index) {
      if (item.indexOf(inputval) != -1) {
        newList.push(item)
      }
    });
    if (!newList.length) {
      newList.push('No Record Found.');
      document.getElementById('addBtn').classList.toggle('hide')
    }
    setUl(newList);
  }
  function addnew() {
    let item = document.getElementById('maininput').value;
    if (!list.includes(item)) {
      list.push(item);
    }
    else {
      alert('Allrady in List')
    }
    setUl(list);
  }
  function sortList() {
    list.sort();
    setUl(list);
  }
</script>

</html>